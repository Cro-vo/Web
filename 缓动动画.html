<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			div {
				position: absolute;
				top: 50px;
				height: 100px;
				width: 100px;
				background-color: #00FFFF;
			}
		</style>
	</head>
	<body>
		<div></div>
		<button class="btn1" type="button">按钮500</button>
		<button class="btn2" type="button">按钮1000</button>
		<script type="text/javascript">
			//封装函数

			function animate(obj, target, callback) {//(obj必须添加绝对定位)
				clearInterval(obj.timer); //防止多次运行
				obj.timer = setInterval(function() {
					var step = (target - obj.offsetLeft) / 10;

					step = step > 0 ? Math.ceil(step) : Math.floor(step)


					if (obj.offsetLeft == target) {
						clearInterval(obj.timer);
						
						if (callback)
						{
							callback();//调用回调函数
						}
					}
					obj.style.left = obj.offsetLeft + step + 'px';
				}, 15);
			}

			var btn1 = document.querySelector('.btn1');
			var btn2 = document.querySelector('.btn2');
			var div = document.querySelector('div');
			
			btn1.addEventListener('click', function() {
				animate(div, 500, function(){
					// div.style.backgroundColor='red';
				});
			})
			
			btn2.addEventListener('click', function() {
				animate(div, 1000, function(){
					// div.style.backgroundColor='#00ffff';
				});
			})
			
		</script>
	</body>
</html>
